@page "{handler:?}"
@model NavModel
@{
    Layout = "_Layout_List";
}

<div class="box h-100">
    <div class="box-head flex">
        <div class="flex-1">栏目管理</div>
        <div class="-mlr-5">
            <a href="NavEdit?typeId=1&url=@System.Net.WebUtility.UrlEncode(Request.Path)" class="btn-primary h-pre mlr-5"><i class="icon-plus"></i>新建</a>
        </div>
    </div>
    <div class="box-body flex-column">
        <div class="mb-10">
            <form method="get">
                
            </form>
        </div>
        <div class="table-fixed flex-1">
            <form method="post" action="@Request.Path/Delete@(Request.QueryString)" id="form">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="table-resize table-fixed-col"><div class="table-resize-item"><input type="checkbox" /></div></th>
                            <th class="table-resize"><div class="table-resize-item">ID</div></th>
                            <th class="table-resize"><div class="table-resize-item text-left">名称</div></th>
                            <th class="table-resize"><div class="table-resize-item">前台URL</div></th>
                            <th class="table-resize"><div class="table-resize-item">后台URL</div></th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var m in Model.List)
                        {
                            <tr>
                                <td class="table-fixed-col"><div class="table-resize-item"><input type="checkbox" name="checkID" value="@m.ID" /></div></td>
                                <td><div class="table-resize-item">@m.ID</div></td>
                                <td><div class="table-resize-item text-left">@m.Name</div></td>
                                <td><div class="table-resize-item">@m.Temp1</div></td>
                                <td><div class="table-resize-item">@m.Temp2</div></td>
                                <td class="white-nowrap">
                                    <input type="button" class="btn-danger h-pre mlr-5 btn-xs" value="删除" onclick="checkDelete(this)" />
                                    <a class="btn-primary h-pre mlr-5 btn-xs" href="NavEdit?typeId=@m.ID&url=@System.Net.WebUtility.UrlEncode(Request.Path+Request.QueryString)">新建子级</a>
                                    <a class="btn-primary h-pre mlr-5 btn-xs" href="NavEdit?id=@m.ID&url=@System.Net.WebUtility.UrlEncode(Request.Path+Request.QueryString)">修改</a>
                                </td>
                            </tr>
                            @foreach (var c in m.Children)
                            {
                                <tr>
                                    <td class="table-fixed-col"><div class="table-resize-item"><input type="checkbox" name="checkID" value="@c.ID" /></div></td>
                                    <td><div class="table-resize-item">@c.ID</div></td>
                                    <td><div class="table-resize-item text-left pl-20">@c.Name</div></td>
                                    <td><div class="table-resize-item">@c.Temp1</div></td>
                                <td><div class="table-resize-item">@c.Temp2</div></td>
                                    <td class="white-nowrap">
                                        <input type="button" class="btn-danger h-pre mlr-5 btn-xs" value="删除" onclick="checkDelete(this)" />
                                        <a class="btn-primary h-pre mlr-5 btn-xs" href="NavEdit?typeId=@c.ID&url=@System.Net.WebUtility.UrlEncode(Request.Path+Request.QueryString)">新建子级</a>
                                        <a class="btn-primary h-pre mlr-5 btn-xs" href="NavEdit?id=@c.ID&url=@System.Net.WebUtility.UrlEncode(Request.Path+Request.QueryString)">修改</a>
                                    </td>
                                </tr>
                                @foreach (var k in c.Children)
                                {
                                    <tr>
                                        <td class="table-fixed-col"><div class="table-resize-item"><input type="checkbox" name="checkID" value="@k.ID" /></div></td>
                                        <td><div class="table-resize-item">@k.ID</div></td>
                                        <td><div class="table-resize-item text-left" style="padding-left:40px;">@k.Name</div></td>
                                        <td><div class="table-resize-item">@k.Temp1</div></td>
                                        <td><div class="table-resize-item">@k.Temp2</div></td>
                                        <td class="white-nowrap">
                                            <input type="button" class="btn-danger h-pre mlr-5 btn-xs" value="删除" onclick="checkDelete(this)" />
                                            <a class="btn-primary h-pre mlr-5 btn-xs" href="NavEdit?id=@k.ID&url=@System.Net.WebUtility.UrlEncode(Request.Path+Request.QueryString)">修改</a>
                                        </td>
                                    </tr>
                                }
                            }
                        }
                        @if (Model.List.Count == 0)
                        {
                            <tr><td colSpan="100" class="text-center font-bold">暂无数据</td></tr>
                        }
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>